<div class="review-list-container">

    <mat-card *ngFor="let review of reviews" class="review-card">
        <mat-card-header>
            <mat-card-title>{{ review.author.username }}</mat-card-title>
            <mat-card-subtitle>{{ review.createdAt | date:'dd/MM/yyyy' }}</mat-card-subtitle>
            <div class="spacer"></div>
            <button *ngIf="isAuthor(review)" mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="edit.emit(review)">
                    <mat-icon>edit</mat-icon>
                    <span>Edit</span>
                </button>
                <button mat-menu-item (click)="delete.emit(review.id)">
                    <mat-icon>delete</mat-icon>
                    <span>Delete</span>
                </button>
            </mat-menu>
        </mat-card-header>
        
        <mat-card-content>
            <p>{{ review.text }}</p>
        </mat-card-content>

        <mat-card-actions class="review-actions">
            <button mat-icon-button (click)="toggleLike(review)" [disabled]="!currentUser"
                [class.liked]="review.isLikedByCurrentUser" [title]="review.isLikedByCurrentUser ? 'Unlike' : 'Like'">
                <mat-icon>{{ review.isLikedByCurrentUser ? 'favorite' : 'favorite_border' }}</mat-icon>
            </button>
            <span>{{ review.likesCount }}</span>
        </mat-card-actions>
    </mat-card>

    <p *ngIf="reviews.length === 0">There are no reviews yet!</p>
</div>